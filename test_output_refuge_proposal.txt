============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-7.4.3, pluggy-1.6.0 -- C:\Users\jordi\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
django: version: 5.1.12, settings: refugis_lliures.settings (from ini)
rootdir: C:\Users\jordi\Desktop\UNI\TFG\Backend\RefugisLliures_Backend
configfile: pytest.ini
plugins: Faker-20.1.0, cov-4.1.0, django-4.7.0, mock-3.12.0
collecting ... collected 25 items

api/tests/refuge_proposal/test_controllers.py::TestRefugeProposalController::test_create_proposal_create_action PASSED [  4%]
api/tests/refuge_proposal/test_controllers.py::TestRefugeProposalController::test_create_proposal_update_action_success PASSED [  8%]
api/tests/refuge_proposal/test_controllers.py::TestRefugeProposalController::test_list_proposals_invalid_filters PASSED [ 12%]
api/tests/refuge_proposal/test_controllers.py::TestRefugeProposalController::test_approve_proposal_success PASSED [ 16%]
api/tests/refuge_proposal/test_daos.py::TestRefugeProposalDAO::test_create_proposal_success PASSED [ 20%]
api/tests/refuge_proposal/test_daos.py::TestRefugeProposalDAO::test_get_by_id_found PASSED [ 24%]
api/tests/refuge_proposal/test_daos.py::TestRefugeProposalDAO::test_approve_success PASSED [ 28%]
api/tests/refuge_proposal/test_daos.py::TestRefugeProposalDAO::test_reject_success PASSED [ 32%]
api/tests/refuge_proposal/test_daos.py::TestProposalStrategies::test_create_refuge_strategy_execute PASSED [ 36%]
api/tests/refuge_proposal/test_mappers.py::TestRefugeProposalMapper::test_firestore_to_model PASSED [ 40%]
api/tests/refuge_proposal/test_mappers.py::TestRefugeProposalMapper::test_model_to_firestore FAILED [ 44%]
api/tests/refuge_proposal/test_mappers.py::TestRefugeProposalMapper::test_lists_conversion PASSED [ 48%]
api/tests/refuge_proposal/test_models.py::TestRefugeProposalModels::test_proposal_creation FAILED [ 52%]
api/tests/refuge_proposal/test_models.py::TestRefugeProposalModels::test_proposal_to_dict PASSED [ 56%]
api/tests/refuge_proposal/test_models.py::TestRefugeProposalModels::test_proposal_from_dict PASSED [ 60%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_create_proposal_valid_create PASSED [ 64%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_create_proposal_invalid_create_missing_payload PASSED [ 68%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_create_proposal_valid_update PASSED [ 72%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_create_proposal_valid_delete PASSED [ 76%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_create_proposal_invalid_delete_with_payload PASSED [ 80%]
api/tests/refuge_proposal/test_serializers.py::TestRefugeProposalSerializers::test_response_serializer_valid PASSED [ 84%]
api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_post_proposal_success FAILED [ 88%]
api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_get_proposals_admin_success PASSED [ 92%]
api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_approve_proposal_success FAILED [ 96%]
api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_reject_proposal_success FAILED [100%]

================================== FAILURES ===================================
______________ TestRefugeProposalMapper.test_model_to_firestore _______________
api\tests\refuge_proposal\test_mappers.py:25: in test_model_to_firestore
    proposal = RefugeProposal(
E   TypeError: RefugeProposal.__init__() missing 2 required positional arguments: 'reviewer_uid' and 'reviewed_at'
_______________ TestRefugeProposalModels.test_proposal_creation _______________
api\tests\refuge_proposal\test_models.py:13: in test_proposal_creation
    proposal = RefugeProposal(
E   TypeError: RefugeProposal.__init__() missing 2 required positional arguments: 'reviewer_uid' and 'reviewed_at'
_____________ TestRefugeProposalViews.test_post_proposal_success ______________
api\tests\refuge_proposal\test_views.py:52: in test_post_proposal_success
    assert response.status_code == status.HTTP_201_CREATED
E   assert 401 == 201
E    +  where 401 = <Response status_code=401, "text/html; charset=utf-8">.status_code
E    +  and   201 = status.HTTP_201_CREATED
____________ TestRefugeProposalViews.test_approve_proposal_success ____________
api\tests\refuge_proposal\test_views.py:85: in test_approve_proposal_success
    assert response.status_code == status.HTTP_200_OK
E   assert 401 == 200
E    +  where 401 = <Response status_code=401, "text/html; charset=utf-8">.status_code
E    +  and   200 = status.HTTP_200_OK
____________ TestRefugeProposalViews.test_reject_proposal_success _____________
api\tests\refuge_proposal\test_views.py:102: in test_reject_proposal_success
    assert response.status_code == status.HTTP_200_OK
E   assert 401 == 200
E    +  where 401 = <Response status_code=401, "text/html; charset=utf-8">.status_code
E    +  and   200 = status.HTTP_200_OK
=========================== short test summary info ===========================
FAILED api/tests/refuge_proposal/test_mappers.py::TestRefugeProposalMapper::test_model_to_firestore
FAILED api/tests/refuge_proposal/test_models.py::TestRefugeProposalModels::test_proposal_creation
FAILED api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_post_proposal_success
FAILED api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_approve_proposal_success
FAILED api/tests/refuge_proposal/test_views.py::TestRefugeProposalViews::test_reject_proposal_success
======================== 5 failed, 20 passed in 2.21s =========================
