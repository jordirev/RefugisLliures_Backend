============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-7.4.3, pluggy-1.6.0 -- C:\Users\jordi\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
django: version: 5.1.12, settings: refugis_lliures.settings (from ini)
rootdir: C:\Users\jordi\Desktop\UNI\TFG\Backend\RefugisLliures_Backend
configfile: pytest.ini
plugins: Faker-20.1.0, cov-4.1.0, django-4.7.0, mock-3.12.0
collecting ... collected 177 items

api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_with_auth_includes_visitors PASSED [  0%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_with_auth_includes_visitors PASSED [  1%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_by_id_success PASSED [  1%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_by_id_authenticated_includes_visitors PASSED [  2%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_by_id_unauthenticated_excludes_visitors PASSED [  2%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_by_id_not_found PASSED [  3%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_search_refugis_no_filters PASSED [  3%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_search_refugis_with_filters PASSED [  4%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_search_refugis_authenticated_includes_visitors PASSED [  5%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_search_refugis_unauthenticated_excludes_visitors PASSED [  5%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_health_check_success PASSED [  6%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_health_check_failure PASSED [  6%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_by_id_exception PASSED [  7%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_search_refugis_exception PASSED [  7%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_media_success PASSED [  8%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_get_refugi_media_not_found PASSED [  9%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_upload_refugi_media_success FAILED [  9%]
api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_delete_refugi_media_success FAILED [ 10%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_get_by_id_found PASSED [ 10%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_get_by_id_not_found PASSED [ 11%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_get_by_id_from_cache PASSED [ 11%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_search_refugis_no_filters PASSED [ 12%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_search_refugis_with_name_filter PASSED [ 12%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_search_refugis_with_region_filter PASSED [ 13%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_health_check_success PASSED [ 14%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_health_check_failure PASSED [ 14%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_has_active_filters_true PASSED [ 15%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_has_active_filters_false PASSED [ 15%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_refugi_exists_true PASSED [ 16%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_refugi_exists_false PASSED [ 16%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_refugi_exists_from_cache PASSED [ 17%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_add_visitor_to_refugi_success PASSED [ 18%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_add_visitor_refugi_not_found PASSED [ 18%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_add_visitor_already_exists PASSED [ 19%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_remove_visitor_from_refugi_success PASSED [ 19%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_remove_visitor_refugi_not_found PASSED [ 20%]
api/tests/refugi_lliure/test_daos.py::TestRefugiDAO::test_remove_visitor_not_in_list PASSED [ 20%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_refuge_detail_complete_flow PASSED [ 21%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_all_refuges_with_filters PASSED [ 22%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_refuge_not_found PASSED [ 22%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_refuge_renovations_flow PASSED [ 23%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_search_refuges_by_location PASSED [ 23%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_refuge_with_missing_optional_fields PASSED [ 24%]
api/tests/refugi_lliure/test_integration.py::TestRefugiLliureIntegration::test_get_refuges_empty_result PASSED [ 24%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_firestore_to_model PASSED [ 25%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_model_to_firestore PASSED [ 25%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_firestore_list_to_models PASSED [ 26%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_models_to_firestore_list PASSED [ 27%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_format_search_response PASSED [ 27%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_format_search_response_with_visitors PASSED [ 28%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_format_search_response_empty_visitors PASSED [ 28%]
api/tests/refugi_lliure/test_mappers.py::TestRefugiMapper::test_format_search_response_from_raw_data PASSED [ 29%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_coordinates_creation PASSED [ 29%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_coordinates_to_dict PASSED [ 30%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_coordinates_from_dict PASSED [ 31%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_info_complementaria_creation PASSED [ 31%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_info_complementaria_defaults PASSED [ 32%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_info_complementaria_to_dict PASSED [ 32%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_info_complementaria_from_dict PASSED [ 33%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_creation_valid PASSED [ 33%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_creation_missing_id PASSED [ 34%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_creation_missing_name PASSED [ 35%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_creation_invalid_coordinates PASSED [ 35%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_to_dict PASSED [ 36%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_from_dict PASSED [ 36%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_str_representation PASSED [ 37%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_coordinates_creation PASSED [ 37%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_search_filters_creation PASSED [ 38%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_search_filters_defaults PASSED [ 38%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_search_filters_to_dict PASSED [ 39%]
api/tests/refugi_lliure/test_models.py::TestRefugiModels::test_refugi_search_filters_to_dict_empty PASSED [ 40%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestMediaMetadata::test_create_media_metadata PASSED [ 40%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestMediaMetadata::test_to_dict PASSED [ 41%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestMediaMetadata::test_from_dict PASSED [ 41%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestRefugeMediaMetadata::test_create_refuge_media_metadata PASSED [ 42%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestRefugeMediaMetadata::test_to_dict PASSED [ 42%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestRefugeMediaMetadata::test_to_dict_without_experience PASSED [ 43%]
api/tests/refugi_lliure/test_refugi_media_model.py::TestRefugeMediaMetadata::test_from_dict PASSED [ 44%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_get_media_list_success PASSED [ 44%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_get_media_list_not_found PASSED [ 45%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_get_media_list_error PASSED [ 45%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_post_media_success PASSED [ 46%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_post_media_no_files PASSED [ 46%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_post_media_not_authenticated PASSED [ 47%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_delete_media_success PASSED [ 48%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_delete_media_not_found PASSED [ 48%]
api/tests/refugi_lliure/test_refugi_media_views.py::TestRefugiMediaViews::test_delete_media_error PASSED [ 49%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_condition_places_altitude PASSED [ 49%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_condition_places PASSED [ 50%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_condition_altitude PASSED [ 50%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_places_altitude PASSED [ 51%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_places PASSED [ 51%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_altitude PASSED [ 52%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_type_only PASSED [ 53%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_condition_places_altitude PASSED [ 53%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_condition_places PASSED [ 54%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_condition_altitude PASSED [ 54%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_condition_only PASSED [ 55%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_places_altitude PASSED [ 55%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_places_only PASSED [ 56%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_altitude_only PASSED [ 57%]
api/tests/refugi_lliure/test_search_strategies.py::TestSearchStrategySelector::test_select_no_filters_raises_error PASSED [ 57%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_condition_places_strategy PASSED [ 58%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_condition_altitude_strategy PASSED [ 58%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_condition_places_altitude_strategy PASSED [ 59%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_altitude_strategy PASSED [ 59%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_condition_places_strategy PASSED [ 60%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_condition_altitude_strategy PASSED [ 61%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_condition_places_altitude_strategy PASSED [ 61%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_only_strategy PASSED [ 62%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_condition_only_strategy PASSED [ 62%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_places_only_strategy PASSED [ 63%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_altitude_only_strategy PASSED [ 63%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_places_altitude_strategy_with_manual_filter PASSED [ 64%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_type_places_altitude_strategy_no_altitude_filter PASSED [ 64%]
api/tests/refugi_lliure/test_search_strategies.py::TestIndividualStrategies::test_places_altitude_strategy_filters_both PASSED [ 65%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_search_by_name PASSED [ 66%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_search_with_type_and_places PASSED [ 66%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_with_name PASSED [ 67%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_with_type PASSED [ 67%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_with_condition PASSED [ 68%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_with_places PASSED [ 68%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_with_altitude PASSED [ 69%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_has_active_filters_no_filters PASSED [ 70%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_search_refugis_no_filters_returns_coordinates PASSED [ 70%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_search_from_cache PASSED [ 71%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_search_by_name_error_handling PASSED [ 71%]
api/tests/refugi_lliure/test_search_strategies.py::TestRefugiLliureDAOWithStrategies::test_build_optimized_query_uses_strategy PASSED [ 72%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_filters_with_empty_strings PASSED [ 72%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_filters_with_none_values PASSED [ 73%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_altitude_filter_with_min_greater_than_max PASSED [ 74%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_places_filter_only_max PASSED [ 74%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_altitude_filter_only_max PASSED [ 75%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_type_condition_places_strategy_only_max PASSED [ 75%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_type_condition_altitude_strategy_only_max PASSED [ 76%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_type_places_altitude_strategy_max_only_in_manual_filter PASSED [ 76%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_condition_places_altitude_strategy_both_altitude_filters PASSED [ 77%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_manual_altitude_filter_all_filtered_out PASSED [ 77%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_refugi_without_altitude_field PASSED [ 78%]
api/tests/refugi_lliure/test_search_strategies.py::TestEdgeCasesAndExceptions::test_search_exception_propagates PASSED [ 79%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_coordinates_serializer_valid PASSED [ 79%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_coordinates_serializer_invalid PASSED [ 80%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_info_complementaria_serializer_valid PASSED [ 80%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_info_complementaria_serializer_defaults PASSED [ 81%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_serializer_valid PASSED [ 81%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_serializer_with_visitors PASSED [ 82%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_serializer_without_visitors PASSED [ 83%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_serializer_empty_visitors_list PASSED [ 83%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_serializer_missing_required_fields PASSED [ 84%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_filters_serializer_valid PASSED [ 84%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_filters_serializer_invalid_range PASSED [ 85%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_filters_serializer_negative_values PASSED [ 85%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_filters_serializer_type_filter PASSED [ 86%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_filters_serializer_invalid_type PASSED [ 87%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_refugi_search_response_serializer PASSED [ 87%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_health_check_response_serializer_healthy PASSED [ 88%]
api/tests/refugi_lliure/test_serializers.py::TestRefugiSerializers::test_health_check_response_serializer_unhealthy PASSED [ 88%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_health_check_success PASSED [ 89%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_health_check_unhealthy PASSED [ 89%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_health_check_success_invalid_serializer PASSED [ 90%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_health_check_unhealthy_invalid_serializer PASSED [ 90%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_health_check_exception PASSED [ 91%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_success PASSED [ 92%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_not_found PASSED [ 92%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_without_auth_no_visitors PASSED [ 93%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_no_filters PASSED [ 93%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_with_filters PASSED [ 94%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_without_auth_no_visitors PASSED [ 94%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_invalid_filters PASSED [ 95%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_server_error PASSED [ 96%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_exception PASSED [ 96%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugis_collection_invalid_serializer PASSED [ 97%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_controller_error PASSED [ 97%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refugi_detail_exception PASSED [ 98%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refuge_renovations_success PASSED [ 98%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refuge_renovations_error PASSED [ 99%]
api/tests/refugi_lliure/test_views.py::TestRefugiViews::test_get_refuge_renovations_exception PASSED [100%]

================================== FAILURES ===================================
____________ TestRefugiController.test_upload_refugi_media_success ____________
C:\Users\jordi\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:946: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'update_media_metadata' to have been called.

During handling of the above exception, another exception occurred:
api\tests\refugi_lliure\test_controllers.py:330: in test_upload_refugi_media_success
    mock_dao.update_media_metadata.assert_called()
E   AssertionError: Expected 'update_media_metadata' to have been called.
____________ TestRefugiController.test_delete_refugi_media_success ____________
C:\Users\jordi\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:946: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'update_media_metadata' to have been called.

During handling of the above exception, another exception occurred:
api\tests\refugi_lliure\test_controllers.py:362: in test_delete_refugi_media_success
    mock_dao.update_media_metadata.assert_called()
E   AssertionError: Expected 'update_media_metadata' to have been called.
---------------------------- Captured stderr call -----------------------------
2025-12-29 00:03:51,726 [FIRESTORE] api.services.firestore_service: FirestoreService.get_db called
2025-12-29 00:03:51,773 [FIRESTORE] api.services.firestore_service: Firebase credentials loaded from file: C:\Users\jordi\Desktop\UNI\TFG\Backend\RefugisLliures_Backend\env/firebase-service-account-dev.json
2025-12-29 00:03:51,773 [FIRESTORE] api.services.firestore_service: Firebase initialized successfully
2025-12-29 00:03:52,519 [WARNING] api.daos.user_dao: No es poden eliminar keys, usuari no trobat amb UID: user_123
=========================== short test summary info ===========================
FAILED api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_upload_refugi_media_success
FAILED api/tests/refugi_lliure/test_controllers.py::TestRefugiController::test_delete_refugi_media_success
======================== 2 failed, 175 passed in 3.51s ========================
